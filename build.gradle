/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java library project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/8.1.1/userguide/building_java_projects.html
 */

plugins {
    id 'java-library'
    id 'maven-publish'
    id "com.github.johnrengelman.shadow" version "7.1.2"
}

project(':hybridcache') {
  apply plugin: 'java-library'
  apply plugin: 'maven-publish'
  apply plugin: 'com.github.johnrengelman.shadow'

  archivesBaseName = 'hybridcache'
  group = 'io.github.drawmoon.hybridcache'
  description = 'A hybrid caching library'
  version = '0.0.1'

  dependencies {
    implementation 'com.github.ben-manes.caffeine:caffeine:2.9.3'
    implementation 'io.lettuce:lettuce-core:6.2.4.RELEASE'
    implementation 'io.minio:minio:8.5.3'
    implementation 'org.apache.commons:commons-lang3:3.9'
    implementation 'de.undercouch:bson4jackson:2.13.1'
    
    compileOnly 'org.projectlombok:lombok:1.18.20'
    annotationProcessor 'org.projectlombok:lombok:1.18.20'

    testImplementation 'junit:junit:4.13.2'
  }

  repositories {
    mavenLocal()
    mavenCentral()
  }

  [compileJava, compileTestJava].each() {
    it.options.encoding = "UTF-8"
  }

  java {
    toolchain {
      languageVersion = JavaLanguageVersion.of(8)
    }
    withJavadocJar()
    withSourcesJar()
  }

  javadoc.options {
    encoding = 'UTF-8'
    links 'https://docs.oracle.com/javase/8/docs/api/'
  }

  artifacts {
    archives javadocJar, sourcesJar, shadowJar
  }

  publishing {
    publications {
      mavenJava(MavenPublication) {
        artifactId = archivesBaseName
        from components.java
        pom {
          name = archivesBaseName
          packaging = 'jar'
          description = description
          url = 'https://github.com/drawmoon/hybrid-cache'
          inceptionYear = '2023'
          
          licenses {
            license {
              name = 'MIT License'
              url = 'https://opensource.org/licenses/MIT'
            }
          }

          scm {
            connection = 'scm:git:git@github.com:drawmoon/hybrid-cache.git'
            developerConnection = 'scm:git:git@github.com:drawmoon/hybrid-cache.git'
            url = 'https://github.com/drawmoon/hybrid-cache'
          }
          
          developers {
            developer {
              id = 'drash'
              name = 'drawmoon'
              email = '1340260725@qq.com'
            }
          }
        }
      }
    }
  }
}
